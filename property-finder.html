<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find investment properties in Detroit that match Framework's criteria - $50K-$100K acquisition, max $10K rehab">
    <title>Property Finder - Framework Real Estate Solutions</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/property-finder.css">
    <link rel="stylesheet" href="css/chatbot.css">
    <link rel="stylesheet" href="css/proforma.css">
    
    <!-- Configuration -->
    <script src="js/app-config.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="images/framework-logo.png" alt="Framework Real Estate Solutions" class="logo-img">
            </a>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-menu" id="navMenu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="affordable-housing.html" class="nav-link">Properties</a>
                <a href="property-finder.html" class="nav-link active">Deal Finder</a>
                <a href="portfolio-simulator.html" class="nav-link">Portfolio Simulator</a>
                <a href="index.html#contact" class="nav-link">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Property Finder Hero -->
    <section class="finder-hero">
        <div class="container">
            <h1 class="page-title">Smart Property Finder</h1>
            <p class="page-subtitle">Find Detroit properties that match our investment criteria</p>
        </div>
    </section>

    <!-- Criteria Section -->
    <section class="criteria-section">
        <div class="container">
            <div class="criteria-card">
                <h2>Our Investment Criteria</h2>
                <div class="criteria-grid">
                    <div class="criteria-item">
                        <span class="criteria-label">Acquisition Range</span>
                        <span class="criteria-value">$50,000 - $100,000</span>
                    </div>
                    <div class="criteria-item">
                        <span class="criteria-label">Max Rehabilitation</span>
                        <span class="criteria-value">$10,000</span>
                    </div>
                    <div class="criteria-item">
                        <span class="criteria-label">Target Areas</span>
                        <span class="criteria-value">Detroit Neighborhoods</span>
                    </div>
                    <div class="criteria-item">
                        <span class="criteria-label">Property Types</span>
                        <span class="criteria-value">Single Family Homes</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <!-- Search Type Tabs -->
            <div class="search-tabs">
                <button class="search-tab active" onclick="switchSearchType('criteria')">
                    <span class="tab-icon">üèòÔ∏è</span>
                    Search by Criteria
                </button>
                <button class="search-tab" onclick="switchSearchType('address')">
                    <span class="tab-icon">üìç</span>
                    Search by Address
                </button>
                <button class="search-tab" onclick="switchSearchType('owner')">
                    <span class="tab-icon">üë§</span>
                    Search by Owner
                </button>
                <button class="search-tab" onclick="switchSearchType('parcel')">
                    <span class="tab-icon">üìã</span>
                    Search by Parcel ID
                </button>
            </div>

            <!-- Criteria Search -->
            <div class="search-card search-type-content" id="searchCriteria">
                <h3>Search by Investment Criteria</h3>
                <form id="propertySearchForm" class="search-form">
                    <div class="search-grid">
                        <div class="form-group">
                            <label for="zipCode">ZIP Code</label>
                            <input type="text" id="zipCode" name="zipCode" placeholder="48201" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label for="minPrice">Min Price</label>
                            <input type="number" id="minPrice" name="minPrice" placeholder="50000" value="50000">
                        </div>
                        <div class="form-group">
                            <label for="maxPrice">Max Price</label>
                            <input type="number" id="maxPrice" name="maxPrice" placeholder="100000" value="100000">
                        </div>
                        <div class="form-group">
                            <label for="minBeds">Min Bedrooms</label>
                            <select id="minBeds" name="minBeds">
                                <option value="">Any</option>
                                <option value="1">1+</option>
                                <option value="2">2+</option>
                                <option value="3" selected>3+</option>
                                <option value="4">4+</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="maxRehab">Max Rehab Cost</label>
                            <select id="maxRehab" name="maxRehab">
                                <option value="">Any Amount</option>
                                <option value="5000">Under $5,000</option>
                                <option value="10000" selected>Under $10,000</option>
                                <option value="15000">Under $15,000</option>
                                <option value="20000">Under $20,000</option>
                                <option value="30000">Under $30,000</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="propertyStatus">Property Status</label>
                            <select id="propertyStatus" name="propertyStatus">
                                <option value="">All Properties</option>
                                <option value="listed">Listed for Sale</option>
                                <option value="not-listed">Not Listed</option>
                                <option value="vacant">Vacant</option>
                                <option value="occupied">Occupied</option>
                                <option value="tax-delinquent">Tax Delinquent</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="propertyType">Property Type</label>
                            <select id="propertyType" name="propertyType">
                                <option value="single-family" selected>Single Family</option>
                                <option value="multi-family">Multi Family</option>
                                <option value="condo">Condo</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="yearBuilt">Min Year Built</label>
                            <select id="yearBuilt" name="yearBuilt">
                                <option value="">Any Year</option>
                                <option value="1900">1900+</option>
                                <option value="1920">1920+</option>
                                <option value="1940">1940+</option>
                                <option value="1960">1960+</option>
                                <option value="1980">1980+</option>
                                <option value="2000">2000+</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="minSqft">Min Square Feet</label>
                            <input type="number" id="minSqft" name="minSqft" placeholder="1000" step="100">
                        </div>
                        <div class="form-group">
                            <label for="ownerType">Owner Type</label>
                            <select id="ownerType" name="ownerType">
                                <option value="">All Owners</option>
                                <option value="individual">Individual</option>
                                <option value="llc">LLC/Corporation</option>
                                <option value="bank">Bank/REO</option>
                                <option value="landbank">Land Bank</option>
                                <option value="government">Government</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-search">Search Properties</button>
                </form>
            </div>

            <!-- Address Search -->
            <div class="search-card search-type-content" id="searchAddress" style="display: none;">
                <h3>Search by Property Address</h3>
                <form id="addressSearchForm" class="search-form">
                    <div class="form-group">
                        <label for="addressInput">Enter Property Address</label>
                        <input type="text" id="addressInput" name="addressInput" 
                               placeholder="e.g., 442 Chandler, Detroit, MI" 
                               class="large-input"
                               autocomplete="off">
                        <div id="addressSuggestions" class="address-suggestions"></div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-search">Search Address</button>
                </form>
            </div>

            <!-- Owner Search -->
            <div class="search-card search-type-content" id="searchOwner" style="display: none;">
                <h3>Search by Property Owner</h3>
                <form id="ownerSearchForm" class="search-form">
                    <div class="form-group">
                        <label for="ownerName">Owner Name</label>
                        <input type="text" id="ownerName" name="ownerName" 
                               placeholder="e.g., John Smith or Smith LLC" 
                               class="large-input">
                        <small style="color: var(--medium-gray); margin-top: 0.5rem; display: block;">
                            Format examples: "SMITH, JOHN" or "DETROIT LAND BANK" or "LLC"
                        </small>
                    </div>
                    <div class="search-options">
                        <label>
                            <input type="checkbox" id="exactMatch" name="exactMatch">
                            Exact match only
                        </label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-search">Search by Owner</button>
                </form>
            </div>

            <!-- Parcel ID Search -->
            <div class="search-card search-type-content" id="searchParcel" style="display: none;">
                <h3>Search by Parcel ID</h3>
                <form id="parcelSearchForm" class="search-form">
                    <div class="form-group">
                        <label for="parcelId">Parcel ID</label>
                        <input type="text" id="parcelId" name="parcelId" 
                               placeholder="e.g., 01234567" 
                               class="large-input">
                    </div>
                    <button type="submit" class="btn btn-primary btn-search">Search by Parcel ID</button>
                </form>
            </div>

        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="resultsSection" style="display: none;">
        <div class="container">
            <div class="results-header">
                <h3>Available Properties</h3>
                <p class="results-count"><span id="resultCount">0</span> properties found</p>
            </div>
            <div id="resultsContainer" class="results-grid">
                <!-- Results will be dynamically inserted here -->
            </div>
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="btn btn-secondary btn-load-more" onclick="loadMoreProperties()">
                    Load More Properties
                </button>
                <p class="load-more-info">Showing <span id="showingCount">0</span> of <span id="totalCount">0</span> properties</p>
            </div>
            <div class="loading-spinner" id="loadingSpinner" style="display: none;">
                <div class="spinner"></div>
                <p>Searching for properties...</p>
            </div>
        </div>
    </section>

    <!-- Analysis Tools Section -->
    <section class="tools-section">
        <div class="container">
            <h2 class="section-title text-center">Investment Analysis Tools</h2>
            <div class="tools-grid">
                <div class="tool-card">
                    <h3>Quick ROI Calculator</h3>
                    <form id="roiCalculator" class="calculator-form">
                        <div class="calc-input">
                            <label>Purchase Price</label>
                            <input type="number" id="purchasePrice" placeholder="75000">
                        </div>
                        <div class="calc-input">
                            <label>Rehab Cost</label>
                            <input type="number" id="rehabCost" placeholder="10000">
                        </div>
                        <div class="calc-input">
                            <label>Monthly Rent</label>
                            <input type="number" id="monthlyRent" placeholder="1329">
                        </div>
                        <button type="submit" class="btn btn-secondary">Calculate ROI</button>
                        <div id="roiResult" class="calc-result" style="display: none;">
                            <p>Annual ROI: <span id="roiPercent">0%</span></p>
                            <p>Monthly Cash Flow: <span id="cashFlow">$0</span></p>
                        </div>
                    </form>
                </div>
                
                <div class="tool-card">
                    <h3>Section 8 Rent Limits</h3>
                    <div class="rent-limits">
                        <div class="rent-item">
                            <span>Studio:</span>
                            <strong>$715/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>1 Bedroom:</span>
                            <strong>$858/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>2 Bedroom:</span>
                            <strong>$1,024/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>3 Bedroom:</span>
                            <strong>$1,329/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>4 Bedroom:</span>
                            <strong>$1,628/month</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer-modern">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="images/logo.svg" alt="Framework" class="footer-logo">
                    <p>Creating exceptional living spaces in Detroit</p>
                </div>
                <div class="footer-links">
                    <a href="index.html">Home</a>
                    <a href="affordable-housing.html">Properties</a>
                    <a href="property-finder.html">Deal Finder</a>
                    <a href="index.html#contact">Contact</a>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2024 Framework Real Estate Solutions. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>


    <!-- Proforma Modal -->
    <div id="proformaModal" class="proforma-modal">
        <div class="proforma-container condensed">
            <div class="proforma-header">
                <h2>Investment Property Analysis</h2>
                <div class="proforma-address" id="proformaAddress"></div>
                <button class="proforma-close" onclick="closeProforma()">&times;</button>
            </div>
            <div class="proforma-body">
                <!-- Metrics Dashboard - Compact Grid -->
                <div class="metrics-dashboard compact">
                    <div class="metrics-grid compact">
                        <div class="metric-card compact">
                            <div class="metric-label">Cash on Cash</div>
                            <div class="metric-value" id="metricCashOnCash">--%</div>
                            <div class="metric-status" id="statusCashOnCash">CALC</div>
                        </div>
                        <div class="metric-card compact">
                            <div class="metric-label">Cap Rate</div>
                            <div class="metric-value" id="metricCapRate">--%</div>
                            <div class="metric-status" id="statusCapRate">CALC</div>
                        </div>
                        <div class="metric-card compact">
                            <div class="metric-label">DSCR</div>
                            <div class="metric-value" id="metricDSCR">-.--</div>
                            <div class="metric-status" id="statusDSCR">CALC</div>
                        </div>
                        <div class="metric-card compact">
                            <div class="metric-label">Cash Flow</div>
                            <div class="metric-value" id="metricCashFlow">$0</div>
                            <div class="metric-status" id="statusCashFlow">CALC</div>
                        </div>
                        <div class="metric-card compact">
                            <div class="metric-label">Total ROI</div>
                            <div class="metric-value" id="metricROI">--%</div>
                            <div class="metric-status" id="statusROI">CALC</div>
                        </div>
                        <div class="metric-card compact">
                            <div class="metric-label">GRM</div>
                            <div class="metric-value" id="metricGRM">-.--</div>
                            <div class="metric-status" id="statusGRM">CALC</div>
                        </div>
                    </div>
                </div>

                <!-- Main Content Grid - 2 Column Layout -->
                <div class="proforma-content-grid">
                    <!-- Left Column -->
                    <div class="proforma-column">
                        <!-- Purchase & Financing Combined -->
                        <div class="proforma-section compact">
                            <h3>Purchase & Financing</h3>
                            <div class="input-grid compact">
                                <div class="input-group compact">
                                    <label>Purchase Price</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="purchasePrice" class="proforma-input input-with-prefix" value="0" min="0" step="1000">
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Rehab <span id="rehabLevelLabel" style="font-size: 0.75rem; color: var(--accent-gold);">(Cosmetic)</span></label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="rehabBudget" class="proforma-input input-with-prefix" value="8000" min="0" step="1000">
                                    </div>
                                    <div class="rehab-level-selector" style="margin-top: 4px;">
                                        <button type="button" class="rehab-level-btn" onclick="updateRehabLevel('lightUpdate')" title="Paint, clean, landscaping">Light</button>
                                        <button type="button" class="rehab-level-btn active" onclick="updateRehabLevel('cosmetic')" title="Update fixtures, flooring">Cosmetic</button>
                                        <button type="button" class="rehab-level-btn" onclick="updateRehabLevel('gutRehab')" title="Complete renovation">Gut</button>
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>ARV</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="afterRepairValue" class="proforma-input input-with-prefix" value="0" min="0" step="1000">
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Closing</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="closingCosts" class="proforma-input input-with-prefix" value="2000" min="0" step="100">
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Down</label>
                                    <div class="input-wrapper">
                                        <input type="number" id="downPaymentPercent" class="proforma-input input-with-suffix" value="25" min="0" max="100" step="5">
                                        <span class="input-suffix">%</span>
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Rate</label>
                                    <div class="input-wrapper">
                                        <input type="number" id="interestRate" class="proforma-input input-with-suffix" value="7.5" min="0" max="20" step="0.1">
                                        <span class="input-suffix">%</span>
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Term</label>
                                    <div class="input-wrapper">
                                        <input type="number" id="loanTermYears" class="proforma-input input-with-suffix" value="30" min="1" max="30" step="1">
                                        <span class="input-suffix">yr</span>
                                    </div>
                                </div>
                            </div>
                            <div class="summary-table compact">
                                <div class="summary-row compact">
                                    <span class="summary-label">Total Investment</span>
                                    <span class="summary-value" id="totalInvestment">$0</span>
                                </div>
                                <div class="summary-row compact">
                                    <span class="summary-label">Loan Amount</span>
                                    <span class="summary-value" id="loanAmount">$0</span>
                                </div>
                                <div class="summary-row compact">
                                    <span class="summary-label">Monthly P&I</span>
                                    <span class="summary-value" id="monthlyPayment">$0</span>
                                </div>
                                <div class="summary-row compact summary-total">
                                    <span class="summary-label">Cash Needed</span>
                                    <span class="summary-value" id="totalCashNeeded">$0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Income -->
                        <div class="proforma-section compact">
                            <h3>Income</h3>
                            <div class="input-grid compact">
                                <div class="input-group compact">
                                    <label>Rent</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="monthlyRent" class="proforma-input input-with-prefix" value="0" min="0" step="50">
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Vacancy</label>
                                    <div class="input-wrapper">
                                        <input type="number" id="vacancyRate" class="proforma-input input-with-suffix" value="5" min="0" max="100" step="1">
                                        <span class="input-suffix">%</span>
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Other</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="otherIncome" class="proforma-input input-with-prefix" value="0" min="0" step="50">
                                    </div>
                                </div>
                            </div>
                            <div class="summary-table compact">
                                <div class="summary-row compact summary-total">
                                    <span class="summary-label">Effective Income</span>
                                    <span class="summary-value" id="effectiveMonthlyIncome">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Column -->
                    <div class="proforma-column">
                        <!-- Operating Expenses -->
                        <div class="proforma-section compact">
                            <h3>Expenses</h3>
                            <div class="input-grid compact">
                                <div class="input-group compact">
                                    <label title="0.8 Millage √ó Assessed Value (unless house is reassessed after sale)">Tax</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="propertyTax" class="proforma-input input-with-prefix" value="150" min="0" step="10">
                                        <span class="input-note" style="position: absolute; top: -8px; right: -5px; font-size: 0.7rem; color: var(--medium-gray); white-space: nowrap;">0.8 √ó Assessed</span>
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Insurance</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="insurance" class="proforma-input input-with-prefix" value="85" min="0" step="10">
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Mgmt</label>
                                    <div class="input-wrapper">
                                        <input type="number" id="propertyManagementPercent" class="proforma-input input-with-suffix" value="8" min="0" max="100" step="1">
                                        <span class="input-suffix">%</span>
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Maint</label>
                                    <div class="input-wrapper">
                                        <input type="number" id="maintenancePercent" class="proforma-input input-with-suffix" value="5" min="0" max="100" step="1">
                                        <span class="input-suffix">%</span>
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Utilities</label>
                                    <div class="input-wrapper">
                                        <span class="input-prefix">$</span>
                                        <input type="number" id="utilities" class="proforma-input input-with-prefix" value="40" min="0" step="10">
                                    </div>
                                </div>
                                <div class="input-group compact">
                                    <label>Reserves</label>
                                    <div class="input-wrapper">
                                        <input type="number" id="reservesPercent" class="proforma-input input-with-suffix" value="5" min="0" max="100" step="1">
                                        <span class="input-suffix">%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="summary-table compact">
                                <div class="summary-row compact summary-total">
                                    <span class="summary-label">Total Expenses</span>
                                    <span class="summary-value" id="totalMonthlyExpenses">$0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Cash Flow Summary -->
                        <div class="proforma-section compact">
                            <h3>Cash Flow</h3>
                            <div class="summary-table compact">
                                <div class="summary-row compact">
                                    <span class="summary-label">Income</span>
                                    <span class="summary-value" id="cfEffectiveIncome">$0</span>
                                </div>
                                <div class="summary-row compact">
                                    <span class="summary-label">Expenses</span>
                                    <span class="summary-value" id="cfOperatingExpenses">-$0</span>
                                </div>
                                <div class="summary-row compact">
                                    <span class="summary-label">NOI</span>
                                    <span class="summary-value" id="monthlyNOI">$0</span>
                                </div>
                                <div class="summary-row compact">
                                    <span class="summary-label">Debt Service</span>
                                    <span class="summary-value" id="cfDebtService">-$0</span>
                                </div>
                                <div class="summary-row compact summary-total">
                                    <span class="summary-label">Monthly CF</span>
                                    <span class="summary-value" id="cfMonthlyCashFlow">$0</span>
                                </div>
                                <div class="summary-row compact">
                                    <span class="summary-label">Annual CF</span>
                                    <span class="summary-value" id="annualCashFlow">$0</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Exit Strategy - Full Width Bottom -->
                <div class="proforma-section compact full-width">
                    <div class="strategy-tabs compact">
                        <button class="strategy-tab active" onclick="switchStrategy('hold')">Buy & Hold</button>
                        <button class="strategy-tab" onclick="switchStrategy('flip')">Fix & Flip</button>
                        <button class="strategy-tab" onclick="switchStrategy('brrrr')">BRRRR</button>
                    </div>
                    
                    <div id="strategyHold" class="strategy-content active compact">
                        <div id="holdProjection" class="compact-projection">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div id="strategyFlip" class="strategy-content compact">
                        <p>Coming soon...</p>
                    </div>
                    
                    <div id="strategyBrrrr" class="strategy-content compact">
                        <div class="brrrr-calculator">
                            <h4>BRRRR Strategy Analysis</h4>
                            <div class="brrrr-grid">
                                <div class="brrrr-phase">
                                    <h5>1. Buy & Rehab</h5>
                                    <div class="brrrr-item">
                                        <span>Purchase Price:</span>
                                        <span id="brrrrPurchase">$0</span>
                                    </div>
                                    <div class="brrrr-item">
                                        <span>Rehab Cost:</span>
                                        <span id="brrrrRehab">$0</span>
                                    </div>
                                    <div class="brrrr-item">
                                        <span>Total Investment:</span>
                                        <span id="brrrrTotal">$0</span>
                                    </div>
                                </div>
                                <div class="brrrr-phase">
                                    <h5>2. Refinance</h5>
                                    <div class="brrrr-item">
                                        <span>After Repair Value:</span>
                                        <input type="number" id="brrrrARV" class="brrrr-input" placeholder="Est. ARV">
                                    </div>
                                    <div class="brrrr-item">
                                        <span>LTV (75%):</span>
                                        <span id="brrrrLoanAmount">$0</span>
                                    </div>
                                    <div class="brrrr-item">
                                        <span>Cash Back:</span>
                                        <span id="brrrrCashBack" class="highlight">$0</span>
                                    </div>
                                </div>
                                <div class="brrrr-phase">
                                    <h5>3. Final Numbers</h5>
                                    <div class="brrrr-item">
                                        <span>Money Left In:</span>
                                        <span id="brrrrMoneyLeft">$0</span>
                                    </div>
                                    <div class="brrrr-item">
                                        <span>New Monthly Payment:</span>
                                        <span id="brrrrNewPayment">$0</span>
                                    </div>
                                    <div class="brrrr-item">
                                        <span>Monthly Cash Flow:</span>
                                        <span id="brrrrCashFlow">$0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actions - Compact -->
                <div class="proforma-actions compact">
                    <button class="proforma-btn proforma-btn-primary compact" onclick="saveProforma()">Save</button>
                    <button class="proforma-btn proforma-btn-secondary compact" onclick="exportProforma()">Export</button>
                    <button class="proforma-btn proforma-btn-secondary compact" onclick="emailProforma()">Email</button>
                    <button class="proforma-btn proforma-btn-secondary compact" onclick="resetProforma()">Reset</button>
                    <a href="docs/proforma-formulas.md" target="_blank" class="proforma-btn proforma-btn-secondary compact">Formulas</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/main.js"></script>
    <script src="js/property-api.js"></script>
    <script src="js/parcel-api.js"></script>
    <script src="js/sales-api.js"></script>
    <script src="js/rehab-estimator.js"></script>
    <script src="js/proforma-calculator.js"></script>
    <script src="js/property-finder.js"></script>
    <script src="js/property-chatbot.js"></script>
    <script>
        function toggleMobileMenu() {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            navMenu.classList.toggle('active');
            menuToggle.classList.toggle('active');
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const navMenu = document.getElementById('navMenu');
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            const navbar = document.querySelector('.navbar');
            
            if (!navbar.contains(event.target) && navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
                menuToggle.classList.remove('active');
            }
        });

        // Update rehab level
        function updateRehabLevel(level) {
            if (!window.proformaCalculator || !window.proformaCalculator.propertyDetails) return;
            
            const rehabEstimator = new RehabEstimator();
            const details = window.proformaCalculator.propertyDetails;
            const estimate = rehabEstimator.estimate(details.sqft, details.bedrooms, details.bathrooms, level);
            
            // Update UI
            document.getElementById('rehabBudget').value = estimate;
            document.getElementById('rehabLevelLabel').textContent = `(${level === 'lightUpdate' ? 'Light' : level === 'cosmetic' ? 'Cosmetic' : 'Gut'})`;
            
            // Update button states
            document.querySelectorAll('.rehab-level-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update calculator
            window.proformaCalculator.updateField('rehabBudget', estimate);
        }
    </script>
</body>
</html>