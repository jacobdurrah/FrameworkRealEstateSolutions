<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find investment properties in Detroit that match Framework's criteria - $50K-$100K acquisition, max $10K rehab">
    <title>Property Finder - Framework Real Estate Solutions</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/property-finder.css">
    <link rel="stylesheet" href="css/chatbot.css">
    <link rel="stylesheet" href="css/proforma.css">
    
    <!-- Configuration -->
    <script src="js/app-config.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="images/logo.svg" alt="Framework" class="logo-img">
            </a>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="affordable-housing.html" class="nav-link">Properties</a>
                <a href="property-finder.html" class="nav-link active">Deal Finder</a>
                <a href="index.html#contact" class="nav-link">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Property Finder Hero -->
    <section class="finder-hero">
        <div class="container">
            <h1 class="page-title">Smart Property Finder</h1>
            <p class="page-subtitle">Find Detroit properties that match our investment criteria</p>
            <div id="apiStatus" class="api-status connected">✓ Zillow API Connected</div>
        </div>
    </section>

    <!-- Criteria Section -->
    <section class="criteria-section">
        <div class="container">
            <div class="criteria-card">
                <h2>Our Investment Criteria</h2>
                <div class="criteria-grid">
                    <div class="criteria-item">
                        <span class="criteria-label">Acquisition Range</span>
                        <span class="criteria-value">$50,000 - $100,000</span>
                    </div>
                    <div class="criteria-item">
                        <span class="criteria-label">Max Rehabilitation</span>
                        <span class="criteria-value">$10,000</span>
                    </div>
                    <div class="criteria-item">
                        <span class="criteria-label">Target Areas</span>
                        <span class="criteria-value">Detroit Neighborhoods</span>
                    </div>
                    <div class="criteria-item">
                        <span class="criteria-label">Property Types</span>
                        <span class="criteria-value">Single Family Homes</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Search Section -->
    <section class="search-section">
        <div class="container">
            <div class="search-card">
                <h3>Property Search</h3>
                <form id="propertySearchForm" class="search-form">
                    <div class="search-grid">
                        <div class="form-group">
                            <label for="zipCode">ZIP Code</label>
                            <input type="text" id="zipCode" name="zipCode" placeholder="48201" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label for="maxPrice">Max Price</label>
                            <input type="number" id="maxPrice" name="maxPrice" placeholder="100000" value="100000">
                        </div>
                        <div class="form-group">
                            <label for="minBeds">Min Bedrooms</label>
                            <select id="minBeds" name="minBeds">
                                <option value="">Any</option>
                                <option value="1">1+</option>
                                <option value="2">2+</option>
                                <option value="3" selected>3+</option>
                                <option value="4">4+</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="propertyType">Property Type</label>
                            <select id="propertyType" name="propertyType">
                                <option value="single-family" selected>Single Family</option>
                                <option value="multi-family">Multi Family</option>
                                <option value="condo">Condo</option>
                            </select>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary btn-search">Search Properties</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="results-section" id="resultsSection" style="display: none;">
        <div class="container">
            <div class="results-header">
                <h3>Available Properties</h3>
                <p class="results-count"><span id="resultCount">0</span> properties found</p>
            </div>
            <div id="resultsContainer" class="results-grid">
                <!-- Results will be dynamically inserted here -->
            </div>
            <div class="loading-spinner" id="loadingSpinner" style="display: none;">
                <div class="spinner"></div>
                <p>Searching for properties...</p>
            </div>
        </div>
    </section>

    <!-- Analysis Tools Section -->
    <section class="tools-section">
        <div class="container">
            <h2 class="section-title text-center">Investment Analysis Tools</h2>
            <div class="tools-grid">
                <div class="tool-card">
                    <h3>Quick ROI Calculator</h3>
                    <form id="roiCalculator" class="calculator-form">
                        <div class="calc-input">
                            <label>Purchase Price</label>
                            <input type="number" id="purchasePrice" placeholder="75000">
                        </div>
                        <div class="calc-input">
                            <label>Rehab Cost</label>
                            <input type="number" id="rehabCost" placeholder="10000">
                        </div>
                        <div class="calc-input">
                            <label>Monthly Rent</label>
                            <input type="number" id="monthlyRent" placeholder="1329">
                        </div>
                        <button type="submit" class="btn btn-secondary">Calculate ROI</button>
                        <div id="roiResult" class="calc-result" style="display: none;">
                            <p>Annual ROI: <span id="roiPercent">0%</span></p>
                            <p>Monthly Cash Flow: <span id="cashFlow">$0</span></p>
                        </div>
                    </form>
                </div>
                
                <div class="tool-card">
                    <h3>Section 8 Rent Limits</h3>
                    <div class="rent-limits">
                        <div class="rent-item">
                            <span>Studio:</span>
                            <strong>$715/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>1 Bedroom:</span>
                            <strong>$858/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>2 Bedroom:</span>
                            <strong>$1,024/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>3 Bedroom:</span>
                            <strong>$1,329/month</strong>
                        </div>
                        <div class="rent-item">
                            <span>4 Bedroom:</span>
                            <strong>$1,628/month</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer-modern">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="images/logo.svg" alt="Framework" class="footer-logo">
                    <p>Creating exceptional living spaces in Detroit</p>
                </div>
                <div class="footer-links">
                    <a href="index.html">Home</a>
                    <a href="affordable-housing.html">Properties</a>
                    <a href="property-finder.html">Deal Finder</a>
                    <a href="index.html#contact">Contact</a>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2024 Framework Real Estate Solutions. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>


    <!-- Proforma Modal -->
    <div id="proformaModal" class="proforma-modal">
        <div class="proforma-container">
            <div class="proforma-header">
                <h2>Investment Property Analysis</h2>
                <div class="proforma-address" id="proformaAddress"></div>
                <button class="proforma-close" onclick="closeProforma()">&times;</button>
            </div>
            <div class="proforma-body">
                <!-- Metrics Dashboard -->
                <div class="metrics-dashboard">
                    <h3>Key Investment Metrics</h3>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-icon">💵</div>
                            <div class="metric-label">Cash on Cash Return</div>
                            <div class="metric-value" id="metricCashOnCash">--%</div>
                            <div class="metric-status" id="statusCashOnCash">CALCULATING</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">📈</div>
                            <div class="metric-label">Cap Rate</div>
                            <div class="metric-value" id="metricCapRate">--%</div>
                            <div class="metric-status" id="statusCapRate">CALCULATING</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">🏦</div>
                            <div class="metric-label">DSCR</div>
                            <div class="metric-value" id="metricDSCR">-.--</div>
                            <div class="metric-status" id="statusDSCR">CALCULATING</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">💰</div>
                            <div class="metric-label">Monthly Cash Flow</div>
                            <div class="metric-value" id="metricCashFlow">$0</div>
                            <div class="metric-status" id="statusCashFlow">CALCULATING</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">🏠</div>
                            <div class="metric-label">Total ROI</div>
                            <div class="metric-value" id="metricROI">--%</div>
                            <div class="metric-status" id="statusROI">CALCULATING</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-icon">📊</div>
                            <div class="metric-label">GRM</div>
                            <div class="metric-value" id="metricGRM">-.--</div>
                            <div class="metric-status" id="statusGRM">CALCULATING</div>
                        </div>
                    </div>
                </div>

                <!-- Purchase Assumptions -->
                <div class="proforma-section">
                    <h3>📋 Purchase Assumptions</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="purchasePrice">Purchase Price</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="purchasePrice" class="proforma-input input-with-prefix" value="0" min="0" step="1000">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="rehabBudget">Rehab Budget</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="rehabBudget" class="proforma-input input-with-prefix" value="8000" min="0" step="1000">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="afterRepairValue">After Repair Value (ARV)</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="afterRepairValue" class="proforma-input input-with-prefix" value="0" min="0" step="1000">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="closingCosts">Closing Costs</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="closingCosts" class="proforma-input input-with-prefix" value="2000" min="0" step="100">
                            </div>
                        </div>
                    </div>
                    <div class="summary-table">
                        <div class="summary-row summary-total">
                            <span class="summary-label">Total Investment</span>
                            <span class="summary-value" id="totalInvestment">$0</span>
                        </div>
                    </div>
                </div>

                <!-- Financing -->
                <div class="proforma-section">
                    <h3>🏦 Financing</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="downPaymentPercent">Down Payment</label>
                            <div class="input-wrapper">
                                <input type="number" id="downPaymentPercent" class="proforma-input input-with-suffix" value="25" min="0" max="100" step="5">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="interestRate">Interest Rate</label>
                            <div class="input-wrapper">
                                <input type="number" id="interestRate" class="proforma-input input-with-suffix" value="7.5" min="0" max="20" step="0.1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="loanTermYears">Loan Term</label>
                            <div class="input-wrapper">
                                <input type="number" id="loanTermYears" class="proforma-input input-with-suffix" value="30" min="1" max="30" step="1">
                                <span class="input-suffix">years</span>
                            </div>
                        </div>
                    </div>
                    <div class="summary-table">
                        <div class="summary-row">
                            <span class="summary-label">Down Payment</span>
                            <span class="summary-value" id="downPaymentAmount">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Loan Amount</span>
                            <span class="summary-value" id="loanAmount">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Monthly P&I</span>
                            <span class="summary-value" id="monthlyPayment">$0</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span class="summary-label">Total Cash Needed</span>
                            <span class="summary-value" id="totalCashNeeded">$0</span>
                        </div>
                    </div>
                </div>

                <!-- Income Analysis -->
                <div class="proforma-section">
                    <h3>💵 Income Analysis</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="monthlyRent">Monthly Rent</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="monthlyRent" class="proforma-input input-with-prefix" value="0" min="0" step="50">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="vacancyRate">Vacancy Rate</label>
                            <div class="input-wrapper">
                                <input type="number" id="vacancyRate" class="proforma-input input-with-suffix" value="5" min="0" max="100" step="1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="otherIncome">Other Income</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="otherIncome" class="proforma-input input-with-prefix" value="0" min="0" step="50">
                            </div>
                        </div>
                    </div>
                    <div class="summary-table">
                        <div class="summary-row">
                            <span class="summary-label">Gross Monthly Income</span>
                            <span class="summary-value" id="grossMonthlyIncome">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Vacancy Loss</span>
                            <span class="summary-value" id="vacancyLoss">-$0</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span class="summary-label">Effective Monthly Income</span>
                            <span class="summary-value" id="effectiveMonthlyIncome">$0</span>
                        </div>
                    </div>
                </div>

                <!-- Operating Expenses -->
                <div class="proforma-section">
                    <h3>📊 Operating Expenses</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label for="propertyTax">Property Tax (Monthly)</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="propertyTax" class="proforma-input input-with-prefix" value="150" min="0" step="10">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="insurance">Insurance (Monthly)</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="insurance" class="proforma-input input-with-prefix" value="85" min="0" step="10">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="propertyManagementPercent">Property Management</label>
                            <div class="input-wrapper">
                                <input type="number" id="propertyManagementPercent" class="proforma-input input-with-suffix" value="8" min="0" max="100" step="1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="maintenancePercent">Maintenance</label>
                            <div class="input-wrapper">
                                <input type="number" id="maintenancePercent" class="proforma-input input-with-suffix" value="5" min="0" max="100" step="1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="utilities">Utilities (if paid)</label>
                            <div class="input-wrapper">
                                <span class="input-prefix">$</span>
                                <input type="number" id="utilities" class="proforma-input input-with-prefix" value="40" min="0" step="10">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="reservesPercent">Reserves</label>
                            <div class="input-wrapper">
                                <input type="number" id="reservesPercent" class="proforma-input input-with-suffix" value="5" min="0" max="100" step="1">
                                <span class="input-suffix">%</span>
                            </div>
                        </div>
                    </div>
                    <div class="summary-table">
                        <div class="summary-row">
                            <span class="summary-label">Property Management</span>
                            <span class="summary-value" id="propertyManagementAmount">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Maintenance</span>
                            <span class="summary-value" id="maintenanceAmount">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Reserves</span>
                            <span class="summary-value" id="reservesAmount">$0</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span class="summary-label">Total Monthly Expenses</span>
                            <span class="summary-value" id="totalMonthlyExpenses">$0</span>
                        </div>
                    </div>
                </div>

                <!-- Cash Flow Analysis -->
                <div class="proforma-section">
                    <h3>💸 Cash Flow Analysis</h3>
                    <div class="summary-table">
                        <div class="summary-row">
                            <span class="summary-label">Effective Monthly Income</span>
                            <span class="summary-value" id="cfEffectiveIncome">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Operating Expenses</span>
                            <span class="summary-value" id="cfOperatingExpenses">-$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Net Operating Income (NOI)</span>
                            <span class="summary-value" id="monthlyNOI">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Debt Service (P&I)</span>
                            <span class="summary-value" id="cfDebtService">-$0</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span class="summary-label">Monthly Cash Flow</span>
                            <span class="summary-value" id="cfMonthlyCashFlow">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Annual Cash Flow</span>
                            <span class="summary-value" id="annualCashFlow">$0</span>
                        </div>
                    </div>
                </div>

                <!-- Exit Strategy -->
                <div class="proforma-section">
                    <h3>🚪 Exit Strategy</h3>
                    <div class="strategy-tabs">
                        <button class="strategy-tab active" onclick="switchStrategy('hold')">Buy & Hold</button>
                        <button class="strategy-tab" onclick="switchStrategy('flip')">Fix & Flip</button>
                        <button class="strategy-tab" onclick="switchStrategy('brrrr')">BRRRR</button>
                    </div>
                    
                    <div id="strategyHold" class="strategy-content active">
                        <h4>5-Year Buy & Hold Projection</h4>
                        <div id="holdProjection">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div id="strategyFlip" class="strategy-content">
                        <h4>Fix & Flip Analysis</h4>
                        <p>Coming soon...</p>
                    </div>
                    
                    <div id="strategyBrrrr" class="strategy-content">
                        <h4>BRRRR Strategy Analysis</h4>
                        <p>Coming soon...</p>
                    </div>
                </div>

                <!-- Metric Explanations -->
                <div class="metric-explanations">
                    <h3>📚 Understanding Your Metrics</h3>
                    <div id="metricExplanations">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    <a href="docs/proforma-formulas.md" target="_blank" class="proforma-btn proforma-btn-secondary">
                        📄 View All Formulas & Documentation
                    </a>
                </div>

                <!-- Actions -->
                <div class="proforma-actions">
                    <button class="proforma-btn proforma-btn-primary" onclick="saveProforma()">
                        💾 Save Analysis
                    </button>
                    <button class="proforma-btn proforma-btn-secondary" onclick="exportProforma()">
                        📄 Export PDF
                    </button>
                    <button class="proforma-btn proforma-btn-secondary" onclick="emailProforma()">
                        📧 Email Report
                    </button>
                    <button class="proforma-btn proforma-btn-secondary" onclick="resetProforma()">
                        🔄 Reset Values
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/main.js"></script>
    <script src="js/property-api.js"></script>
    <script src="js/parcel-api.js"></script>
    <script src="js/proforma-calculator.js"></script>
    <script src="js/property-finder.js"></script>
    <script src="js/property-chatbot.js"></script>
</body>
</html>