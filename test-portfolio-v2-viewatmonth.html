<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio V2 - View at Month Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #2c3e50;
        }
        .test-section {
            background: #f8f9fa;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .test-case {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
        }
        .expected {
            color: #27ae60;
            font-weight: bold;
        }
        .test-steps {
            margin: 10px 0;
            padding-left: 20px;
        }
        .test-steps li {
            margin: 5px 0;
        }
        code {
            background: #e8e8e8;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>Portfolio Simulator V2 - View at Month Test Cases</h1>
    
    <div class="test-section">
        <h2>Test Setup</h2>
        <p>Create a timeline with properties at different months to test the View at Month functionality:</p>
        <ol class="test-steps">
            <li>Go to <a href="https://frameworkrealestatesolutions.com/portfolio-simulator-v2.html" target="_blank">Portfolio Simulator V2</a></li>
            <li>Click "New Simulation" and confirm</li>
            <li>Set up the following properties:</li>
        </ol>
        
        <table border="1" cellpadding="5" style="margin: 10px 0;">
            <tr>
                <th>Month</th>
                <th>Property</th>
                <th>Price</th>
                <th>Rent</th>
                <th>Expenses</th>
            </tr>
            <tr>
                <td>0</td>
                <td>Rental 1</td>
                <td>$65,780</td>
                <td>$1,350</td>
                <td>$500</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Rental 2</td>
                <td>$67,640</td>
                <td>$1,400</td>
                <td>$550</td>
            </tr>
            <tr>
                <td>7</td>
                <td>Rental 3</td>
                <td>$56,085</td>
                <td>$1,250</td>
                <td>$475</td>
            </tr>
        </table>
    </div>

    <div class="test-section">
        <h2>Test Cases</h2>
        
        <div class="test-case">
            <h3>Test Case 1: View at Month 0 (Today)</h3>
            <p><strong>Action:</strong> Set "View at month" to <code>0</code> and click Refresh</p>
            <p class="expected">Expected Results:</p>
            <ul>
                <li>Total Properties: 1</li>
                <li>Monthly Income: $1,350</li>
                <li>Total Invested: ~$13,156 (20% down of $65,780)</li>
                <li>Only Rental 1 should appear in Property Breakdown</li>
            </ul>
        </div>

        <div class="test-case">
            <h3>Test Case 2: View at Month 2</h3>
            <p><strong>Action:</strong> Set "View at month" to <code>2</code> and click Refresh</p>
            <p class="expected">Expected Results:</p>
            <ul>
                <li>Total Properties: 2</li>
                <li>Monthly Income: $2,750 ($1,350 + $1,400)</li>
                <li>Total Invested: ~$26,684 (down payments for both properties)</li>
                <li>Rental 1 and Rental 2 should appear in Property Breakdown</li>
            </ul>
        </div>

        <div class="test-case">
            <h3>Test Case 3: View at Month 7</h3>
            <p><strong>Action:</strong> Set "View at month" to <code>7</code> and click Refresh</p>
            <p class="expected">Expected Results:</p>
            <ul>
                <li>Total Properties: 3</li>
                <li>Monthly Income: $4,000 ($1,350 + $1,400 + $1,250)</li>
                <li>Total Invested: ~$37,901 (down payments for all properties)</li>
                <li>All three properties should appear in Property Breakdown</li>
            </ul>
        </div>

        <div class="test-case">
            <h3>Test Case 4: View at Month 34</h3>
            <p><strong>Action:</strong> Set "View at month" to <code>34</code> and click Refresh</p>
            <p class="expected">Expected Results:</p>
            <ul>
                <li>Total Properties: 3 (same as month 7)</li>
                <li>Portfolio Value: Should be higher than $189,505 due to 3% annual appreciation</li>
                <li>Rental Income: Should show accumulated net rent over 34 months</li>
                <li>Total Interest Paid: Should show accumulated interest</li>
            </ul>
        </div>

        <div class="test-case">
            <h3>Test Case 5: Edge Case - View Before Property Purchase</h3>
            <p><strong>Action:</strong> Set "View at month" to <code>1</code> and click Refresh</p>
            <p class="expected">Expected Results:</p>
            <ul>
                <li>Total Properties: 1 (only Rental 1)</li>
                <li>Rental 2 should NOT appear (purchased at month 2)</li>
                <li>Monthly Income: $1,350</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>Verification Checklist</h2>
        <ul>
            <li>✅ Properties only count if purchased by the view month</li>
            <li>✅ Monthly income reflects only active properties</li>
            <li>✅ Monthly expenses include only active mortgages and property expenses</li>
            <li>✅ Total invested only includes down payments made by view month</li>
            <li>✅ Net cash flow updates based on active properties</li>
            <li>✅ Cash-on-Cash return recalculates properly</li>
            <li>✅ Property Breakdown shows timeline status for each property</li>
            <li>✅ Future projections (appreciation, interest) work correctly</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>Common Issues</h2>
        <ul>
            <li><strong>Values not updating?</strong> Make sure to click "Refresh" after changing the view month</li>
            <li><strong>Wrong property count?</strong> Check that property purchase months are set correctly</li>
            <li><strong>Timeline status incorrect?</strong> Verify the property address matches exactly in buy/sell events</li>
        </ul>
    </div>
</body>
</html>